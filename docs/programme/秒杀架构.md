秒杀架构


![img.png](images/seckiljiagou.png)
对于一个秒杀系统而言，比较重要的有一下几点：

1.客户端设置秒杀答题，错开大量人下单的时间，阻止作弊器刷单。
2.独立出来一套秒杀系统，专门负责处理秒杀请求
3.优先基于redis进行高并发的库存减扣，一旦库存扣完则秒杀结束。
4.秒杀结束之后Nginx层过滤无效的请求，大幅度削减转发到后端的流量
5.瞬间生产大量的下单请求直接进入RocketMQ进行削峰，订单系统慢慢拉取消息完成下单操作。


对于瞬时高并发抢购商品的场景，首先要避免直接基于数据库进行高并发的库存扣减，那样会对数据库造成过大的压力。

因为数据库单机可能每秒只能抗几千的请求，但是基于redis进行高并发扣减库存，可以轻松抗几万的请求。

